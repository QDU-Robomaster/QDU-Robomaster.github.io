---
id: env-setup-ch32
title: CH32 Environment Setup
sidebar_position: 2
---

# CH32 Environment Setup

The RISC-V toolchain situation for the CH32 series is quite chaotic. The following two options are recommended:

* [The official riscv-wch-elf bundled with MRS](http://www.mounriver.com/download): Supports WCH's rv32imafcxw extended instruction set, but has incomplete C++ standard library support, making it incompatible with libraries like Eigen.
* [Upstream riscv32-unknown-elf](https://github.com/riscv-collab/riscv-gnu-toolchain): Does **not** support WCH's extended instruction set, but provides complete C++ standard library support. On Windows, that means using MSYS2, which can be a bit of a hassle.

For quick compilation, you can use the Docker image provided by this project.

## CMake Configuration

An additional option needs to be configured: `LIBXR_CH32_CONFIG_FILE`, which specifies the path to the CH32 peripheral library configuration file, such as: `ch32v30x_conf.h`.

```cmake
set(LIBXR_SYSTEM FreeRTOS)
set(LIBXR_DRIVER ch)

set(LIBXR_CH32_CONFIG_FILE "ch32v30x_conf.h")

add_subdirectory(libxr)

...
```

## Example Project

[CH32V307+FreeRTOS+XRUSB](https://github.com/Jiu-xiao/CH32V307_LibXR_Template)
